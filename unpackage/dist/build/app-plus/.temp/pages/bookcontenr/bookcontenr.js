require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([2],{88:function(t,e,a){"use strict";var i=s(a(2)),n=s(a(89));function s(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(n.default))},89:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(91),n=a.n(i),s=a(96);var o=function(t){a(90)},r=a(0)(n.a,s.a,o,null,null);e.default=r.exports},90:function(t,e){},91:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=r(a(4)),n=r(a(5)),s=r(a(3)),o=r(a(92));function r(t){return t&&t.__esModule?t:{default:t}}a(7);e.default={components:{uniDrawer:i.default,uniIcon:n.default,uniTag:s.default,uniNumberBox:o.default},data:function(){return{bookData:[],bookid:"",imagesList:[],chapter:"",nowCap:0,nowCapName:"",maxCap:0,scrollTop:0,laiYuanName:"",skipPage:0,prevLoading:!1,nextLoading:!1,prevdisabled:!1,nextdisabled:!1,userData:[],rightDrawerVisible:!1,navList:[],renList:[],setStyle:{},numberValue:20,numberValue1:8,pheight:0,stop:0,checked:!1,checked1:!1,bgAudioMannager:null,readList:[],readDuan:0,per:0,pitValue:5,spdValue:5,volValue:5}},onLoad:function(e){var a=this,i=t.getBackgroundAudioManager();i.onPlay(function(){console.log("开始播放")}),i.onPause(function(){console.log("暂停播放")}),i.onEnded(function(){a.palyEnd()}),this.bgAudioMannager=i,this.bookid=e.bid,this.nowCap=e.idx,this.navList=[{name:"正常",show:!0,class:"textarea1"},{name:"夜间",show:!1,class:"textarea2"},{name:"护眼",show:!1,class:"textarea3"},{name:"暖系",show:!1,class:"textarea4"}],this.renList=[{name:"普通女声",show:!0,id:0},{name:"普通男声",show:!1,id:1},{name:"百度逍遥",show:!1,id:3},{name:"百度丫丫",show:!1,id:4}],this.getpageHeight()},onShow:function(){this.userData=t.getStorageSync("user"),this.getBookMeun(),this.setStyle=this.navList[0]},methods:{getpageHeight:function(){var e=this;t.getSystemInfo({success:function(t){e.pheight=t.windowHeight}})},closeRightDrawer:function(){this.rightDrawerVisible=!1},showRightDrawer:function(){this.rightDrawerVisible=!0},getBookMeun:function(){t.showLoading({title:"加载中..."});var e=this;t.request({url:"https://novel.juhe.im/book-chapters/"+e.bookid,data:{},header:{"content-type":"application/json"},method:"GET",success:function(a){t.hideLoading();new Date(a.data.updated.replace("T"," ").replace("Z","").replace(/-/g,"/").split(".")[0]);var i=a.data.chapters;e.bookData=i,e.maxCap=a.data.chapters.length-1,e.laiYuanName=a.data.name,e.getNeirong(i[e.nowCap].link),e.nowCapName=i[e.nowCap].title,t.setNavigationBarTitle({title:i[e.nowCap].title})}})},saveUserData:function(){var e=this.userData,a=this.bookid,i=this.nowCap;e.forEach(function(t){t.chapId==a&&(t.zhang=parseInt(i)+1)}),t.setStorageSync("user",e)},getDetails:function(t){var e=t.target.dataset.idx;this.nowCap=e,console.log(t,e),0==e?this.prevdisabled=!0:e==this.maxCap?this.nextdisabled=!0:(this.prevdisabled=!1,this.nextdisabled=!1),this.nowCapName=this.bookData[e].title,this.getNeirong(this.bookData[e].link)},changePage:function(t){var e=this.nowCap;"prev"==t.target.dataset.fanye?--e>=0?(this.nowCap=e,this.prevLoading=!0,this.nextdisabled=!1,this.nowCapName=this.bookData[e].title,this.getNeirong(this.bookData[e].link)):this.prevdisabled=!0:++e<=this.maxCap?(this.nowCap=e,this.nextLoading=!0,this.prevdisabled=!1,this.nowCapName=this.bookData[e].title,this.getNeirong(this.bookData[e].link)):this.nextdisabled=!0},getNeirong:function(e){var a=this;a.showMulu=!1,a.readDuan=0,this.stop=0,a.chapter="",a.saveUserData(),t.setNavigationBarTitle({title:a.nowCapName}),"176小说"==a.laiYuanName?t.request({url:"https://chapter2.zhuishushenqi.com/chapter/"+encodeURIComponent(e)+"?k=2124b73d7e2e1945&t=1468223717",data:{},header:{"content-type":"application/json"},method:"GET",success:function(t){a.prevLoading=!1,a.nextLoading=!1,a.chapter=t.data.chapter.body;var e=t.data.chapter.body;if(a.readList=e.StrCut2Arr(500),console.log("我读到这里了176",a.checked1),a.checked1){console.log("我读到这里了");var i=a;setTimeout(function(){i.readBook()},500)}}}):"优质书源"==a.laiYuanName?t.request({url:"https://novel.juhe.im/chapters/"+encodeURIComponent(e),data:{},header:{"content-type":"application/json"},method:"GET",success:function(t){a.prevLoading=!1,a.nextLoading=!1,a.imagesList=t.data.chapter.images?t.data.chapter.images.split(","):"",a.chapter=t.data.chapter.cpContent?t.data.chapter.cpContent:"";var e=t.data.chapter.cpContent?t.data.chapter.cpContent:"";if(a.readList=e.StrCut2Arr(500),a.checked1){var i=a;setTimeout(function(){i.readBook()},500)}}}):t.request({url:"https://novel.juhe.im/chapters/"+encodeURIComponent(e),data:{},header:{"content-type":"application/json"},method:"GET",success:function(t){a.prevLoading=!1,a.nextLoading=!1,a.chapter=t.data.chapter.body;var e=t.data.chapter.body;if(a.readList=e.StrCut2Arr(500),a.checked1){var i=a;setTimeout(function(){i.readBook()},500)}}})},getList:function(t){var e=this;console.log(t),this.rightDrawerVisible=!1;var a=this.navList;a.forEach(function(a,i){a.show=!1,i==t&&(a.show=!0,e.setStyle=a)}),this.navList=a},getRen:function(t){var e=this;this.checked1=!1,this.bgAudioMannager.stop();var a=this.renList;a.forEach(function(a,i){a.show=!1,i==t&&(a.show=!0,e.per=a.id)}),this.renList=a},onNumberChange:function(t){this.numberValue=t},switchChange:function(e){if(this.checked=e.detail.value,e.detail.value){t.setKeepScreenOn({keepScreenOn:!0}),this.closeRightDrawer();var a=this,i=parseInt(a.pheight/2);a.timer=setInterval(function(){a.stop+=i},1e3*a.numberValue1)}else clearInterval(this.timer),t.setKeepScreenOn({keepScreenOn:!1})},onNumberChange1:function(t){this.bgAudioMannager.stop(),clearInterval(this.timer),this.checked=!1,this.numberValue1=t},onNumberChangeSpd:function(t){this.bgAudioMannager.stop(),this.checked1=!1,this.spdValue=t},onNumberChangePit:function(t){this.bgAudioMannager.stop(),this.checked1=!1,this.pitValue=t},onNumberChangeVol:function(t){this.bgAudioMannager.stop(),this.checked1=!1,this.volValue=t},lower:function(){if(this.checked){var t=this;setTimeout(function(){t.stop=0;var e=t.nowCap;++e<=t.maxCap?(t.nowCap=e,t.nextLoading=!0,t.prevdisabled=!1,t.nowCapName=t.bookData[e].title,t.getNeirong(t.bookData[e].link)):t.nextdisabled=!0},3e3)}},zMa:function(t){var e=encodeURIComponent(t);return e=encodeURIComponent(e),"http://tsn.baidu.com/text2audio?lan=zh&ctp=1&cuid=abcdxxx&tok=24.49c470166e0160c5b9f0a3b8efaf25a4.2592000.1547256837.282335-15142951&aue=3&vol="+this.volValue+"&per="+this.per+"&spd="+this.spdValue+"&pit="+this.pitValue+"&tex="+e},readBook:function(){this.bgAudioMannager.title="致爱丽丝",this.bgAudioMannager.singer="暂无",this.bgAudioMannager.src=this.zMa(this.readList[this.readDuan]),this.bgAudioMannager.play()},switchChange1:function(e){e.detail.value?(this.checked1=e.detail.value,this.closeRightDrawer(),t.setKeepScreenOn({keepScreenOn:!0}),this.readBook()):(this.bgAudioMannager.stop(),t.setKeepScreenOn({keepScreenOn:!1}))},palyEnd:function(){if(this.bgAudioMannager.stop(),console.log("播放停止"),this.readDuan<this.readList.length-1)this.readDuan++,this.readBook();else{this.stop=0;var t=this.nowCap;++t<=this.maxCap?(this.nowCap=t,this.nextLoading=!0,this.prevdisabled=!1,this.nowCapName=this.bookData[t].title,this.getNeirong(this.bookData[t].link)):this.nextdisabled=!0}}},onHide:function(){clearInterval(this.timer),this.bgAudioMannager.stop()},onNavigationBarButtonTap:function(t){this.rightDrawerVisible=!this.rightDrawerVisible}},String.prototype.StrCut2Arr=function(t){for(var e=this,a=[],i=Math.ceil(e.length/t),n=0;n<i;n++)if(e.length>=t){var s=e.substring(0,t);a.push(s),e=e.substring(t)}else e=e,a.push(e);return a}}).call(e,a(1).default)},92:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(94),n=a.n(i),s=a(95);var o=function(t){a(93)},r=a(0)(n.a,s.a,o,null,null);e.default=r.exports},93:function(t,e){},94:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"uni-number-box",props:{value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.value<=this.min},disableAdd:function(){return this.value>=this.max}},watch:{value:function(t){this.inputValue=t},inputValue:function(t){this.$emit("change",t)}},methods:{_calcValue:function(t){var e=this._getDecimalScale(),a=this.inputValue*e,i=this.step*e;"subtract"===t?a-=i:"add"===t&&(a+=i),a<this.min||a>this.max||(this.inputValue=a/e)},_getDecimalScale:function(){var t=1;return~~this.step!==this.step&&(t=Math.pow(10,(this.step+"").split(".")[1].length)),t},_onBlur:function(t){var e=t.detail.value;e?((e=+e)>this.max?e=this.max:e<this.min&&(e=this.min),this.inputValue=e):this.inputValue=0}}}},95:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"uni-numbox"},[a("view",{staticClass:"uni-numbox-minus",class:{"uni-numbox-disabled":t.disableSubtract},attrs:{eventid:"35e-0"},on:{click:function(e){t._calcValue("subtract")}}},[t._v("-")]),a("input",{staticClass:"uni-numbox-value",attrs:{type:"number",disabled:t.disabled,value:t.inputValue,eventid:"n8v-1"},on:{blur:t._onBlur}}),a("view",{staticClass:"uni-numbox-plus",class:{"uni-numbox-disabled":t.disableAdd},attrs:{eventid:"Pyg-2"},on:{click:function(e){t._calcValue("add")}}},[t._v("+")])])},staticRenderFns:[]};e.a=i},96:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("scroll-view",{class:t.setStyle.class,style:{height:t.pheight+"px"},attrs:{"scroll-y":"","scroll-top":t.stop,"scroll-with-animation":"true",eventid:"F1o-13"},on:{scrolltolower:t.lower}},[a("view",{staticClass:"textarea0",style:{fontSize:t.numberValue+"px"}},[t._v("\n\t\t"+t._s(t.chapter)+"\n\t")]),t.imagesList.length?a("view",t._l(t.imagesList,function(t,e){return a("image",{key:e,staticStyle:{width:"700upx"},attrs:{src:t,mode:"widthFix"}})})):t._e(),a("view",{staticClass:"fanye"},[a("button",{attrs:{type:"primary",size:"mini",loading:t.prevLoading,disabled:t.prevdisabled,"data-fanye":"prev",eventid:"vlo-0"},on:{tap:t.changePage}},[t._v(" 上一章 ")]),a("button",{attrs:{type:"primary",size:"mini",loading:t.nextLoading,disabled:t.nextdisabled,"data-fanye":"next",eventid:"sPO-1"},on:{tap:t.changePage}},[t._v(" 下一章 ")])],1),a("uni-drawer",{attrs:{visible:t.rightDrawerVisible,mode:"right",eventid:"J9X-12",mpcomid:"seG-7"},on:{close:t.closeRightDrawer}},[a("view",{staticClass:"dwtitel"},[t._v("模式选择")]),a("view",{staticClass:"quyu"},t._l(t.navList,function(e,i,n){return a("view",{key:n,staticClass:"tag-view",attrs:{eventid:"VSC-2-"+i},on:{tap:function(e){t.getList(i)}}},[a("uni-tag",{attrs:{text:e.name,inverted:"true",type:e.show?"primary":"default",circle:!0,mpcomid:"7Dn-0-"+i}})],1)})),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("字体大小")]),a("uni-number-box",{attrs:{min:16,max:32,value:t.numberValue,eventid:"M3k-3",mpcomid:"I15-1"},on:{change:t.onNumberChange}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("自动阅读")]),a("switch",{attrs:{name:"switch",checked:t.checked,eventid:"CHG-4"},on:{change:t.switchChange}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("阅读速度")]),a("uni-number-box",{attrs:{min:5,max:15,value:t.numberValue1,eventid:"x7l-5",mpcomid:"clQ-2"},on:{change:t.onNumberChange1}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("语音播放")]),a("switch",{attrs:{name:"switch",checked:t.checked1,eventid:"Een-6"},on:{change:t.switchChange1}})],1),a("view",[a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("语速")]),a("uni-number-box",{attrs:{min:0,max:15,value:t.spdValue,eventid:"z5U-7",mpcomid:"p3Y-3"},on:{change:t.onNumberChangeSpd}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("音调")]),a("uni-number-box",{attrs:{min:0,max:15,value:t.pitValue,eventid:"kvH-8",mpcomid:"Bjk-4"},on:{change:t.onNumberChangePit}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[t._v("音量")]),a("uni-number-box",{attrs:{min:0,max:15,value:t.volValue,eventid:"7Mu-9",mpcomid:"AsX-5"},on:{change:t.onNumberChangeVol}})],1),a("view",{staticClass:"dwtitel"},[t._v("人物选择")]),a("view",{staticClass:"quyu"},t._l(t.renList,function(e,i,n){return a("view",{key:n,staticClass:"tag-view",attrs:{eventid:"8FA-10-"+i},on:{tap:function(e){t.getRen(i)}}},[a("uni-tag",{attrs:{text:e.name,inverted:"true",type:e.show?"primary":"default",circle:!0,mpcomid:"v5o-6-"+i}})],1)})),a("view",{staticClass:"dwtitel",staticStyle:{"margin-top":"10upx"}},[a("button",{staticClass:"button",attrs:{type:"warn",size:"mini",eventid:"UCd-11"},on:{tap:t.closeRightDrawer}},[t._v("关闭")])],1)])])],1)},staticRenderFns:[]};e.a=i}},[88]);