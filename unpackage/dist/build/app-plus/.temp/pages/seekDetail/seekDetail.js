require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([3],{55:function(t,e,o){"use strict";var n=a(o(2)),i=a(o(56));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(i.default))},56:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(58),i=o.n(n),a=o(63);var s=function(t){o(57)},l=o(0)(i.a,a.a,s,null,null);e.default=l.exports},57:function(t,e){},58:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n,i=o(59),a=(n=i)&&n.__esModule?n:{default:n};e.default={data:function(){return{isXuan:!1,kw:"",bookList:[],chang:0,total:0,loadingType:0,contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}},components:{uniLoadMore:a.default},onLoad:function(t){this.kw=t.keyword,this.getStyleDeitai(this.kw,0)},onPageScroll:function(t){this.isXuan=t.scrollTop>50},onReachBottom:function(){if(0===this.loadingType)if(this.loadingType=1,this.chang<this.total){var e=this,o=this.chang,n=this.bookList;t.request({url:"http://api.zhuishushenqi.com/book/fuzzy-search?query="+encodeURIComponent(e.kw)+"&start="+o+"&limit=10",data:{},header:{"content-type":"application/json"},method:"GET",success:function(t){e.loadingType=0;var i=t.data;i.books.forEach(function(t){t.cover=decodeURIComponent(t.cover).replace("/agent/","")});var a=Math.ceil(i.total/i.books.length)*i.books.length;i.books.forEach(function(t){n.push(t)}),o=n.length==i.books.length?i.books.length:n.length+i.books.length,e.bookList=n,e.chang=o,e.total=a}})}else this.loadingType=2},methods:{getStyleDeitai:function(e,o){t.showLoading({title:"加载中..."}),console.log("01ss",e,o);var n=this,i=this.chang,a=this.bookList;t.request({url:"http://api.zhuishushenqi.com/book/fuzzy-search?query="+encodeURIComponent(e)+"&start="+o+"&limit=10",data:{},header:{"content-type":"application/json"},method:"GET",success:function(e){t.hideLoading();var o=e.data;o.books.forEach(function(t){t.cover=decodeURIComponent(t.cover).replace("/agent/","")});var s=Math.ceil(o.total/o.books.length)*o.books.length;o.books.forEach(function(t){a.push(t)}),i=a.length==o.books.length?o.books.length:a.length+o.books.length,n.bookList=a,n.chang=i,n.total=s}})},startRecognize:function(){var e={},o=this;e.engine="baidu",o.kw="",plus.speech.startRecognize(e,function(t){var e=t.replace(/[\ |\~|\`|\!|\@|\#|\$|\%|\^|\&|\*|\(|\)|\-|\_|\+|\=|\||\\|\[|\]|\{|\}|\;|\:|\"|\'|\,|\<|\.|\>|\/|\?]/g,"");o.kw=e,this.getStyleDeitai(e,0)},function(e){t.showToast({title:"语音识别失败,请再说一次",mask:!1,icon:"none",duration:1500})})},confirm:function(t){this.bookList=[],this.chang=0,this.total=0,this.kw=t.detail.value,this.getStyleDeitai(t.detail.value,0)},openInfo:function(e){t.navigateTo({url:"../booknote/booknote?bookid="+e.currentTarget.dataset.id})}}}}).call(e,o(1).default)},59:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(61),i=o.n(n),a=o(62);var s=function(t){o(60)},l=o(0)(i.a,a.a,s,null,null);e.default=l.exports},60:function(t,e){},61:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"load-more",props:{loadingType:{type:Number,default:0},showImage:{type:Boolean,default:!0},color:{type:String,default:"#777777"},contentText:{type:Object,default:function(){return{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}}}},data:function(){return{}}}},62:function(t,e,o){"use strict";var n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"load-more"},[o("view",{directives:[{name:"show",rawName:"v-show",value:1===t.loadingType&&t.showImage,expression:"loadingType === 1 && showImage"}],staticClass:"loading-img"},[o("view",{staticClass:"load1"},[o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}})]),o("view",{staticClass:"load2"},[o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}})]),o("view",{staticClass:"load3"},[o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}}),o("view",{style:{background:t.color}})])]),o("text",{staticClass:"loading-text",style:{color:t.color}},[t._v(t._s(0===t.loadingType?t.contentText.contentdown:1===t.loadingType?t.contentText.contentrefresh:t.contentText.contentnomore))])])},staticRenderFns:[]};e.a=n},63:function(t,e,o){"use strict";var n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",[o("view",{class:t.isXuan?"header_k":"header"},[o("view",{staticClass:"input-view"},[o("uni-icon",{attrs:{type:"search",size:"22",color:"#666666",mpcomid:"wHl-0"}}),o("input",{staticClass:"input",attrs:{"confirm-type":"search",value:t.kw,type:"text",placeholder:"输入搜索关键词",eventid:"Uis-0"},on:{confirm:t.confirm}})],1),o("view",{attrs:{eventid:"PKL-2"},on:{tap:t.startRecognize}},[o("uni-icon",{attrs:{type:"mic-filled",size:"22",color:"#666666",eventid:"xMN-1",mpcomid:"bl4-1"},on:{tap:t.startRecognize}})],1)]),o("view",{staticClass:"uni-padding-wrap",staticStyle:{"margin-top":"10upx"}},[o("view",{staticClass:"uni-list"},t._l(t.bookList,function(e,n){return o("view",{key:n,staticClass:"uni-list-cell",attrs:{"hover-class":"uni-list-cell-hover"}},[o("view",{staticClass:"uni-media-list",attrs:{"data-id":e._id,eventid:"wPC-3-"+n},on:{tap:t.openInfo}},[o("image",{staticClass:"uni-media-list-logo",attrs:{src:e.cover,mode:"widthFix"}}),o("view",{staticClass:"uni-media-list-body"},[o("view",{staticClass:"uni-media-list-text-top"},[t._v(t._s(e.title))]),o("view",{staticClass:"uni-media-list-text-bottom uni-ellipsis"},[t._v(t._s(e.author))]),o("view",{staticClass:"uni-media-list-text-bottom uni-ellipsis"},[t._v(t._s(e.lastChapter))]),o("view",{staticClass:"uni-media-list-text-bottom duoeli"},[t._v(t._s(e.shortIntro))])])])])}))]),o("uni-load-more",{attrs:{loadingType:t.loadingType,contentText:t.contentText,mpcomid:"BTG-2"}})],1)},staticRenderFns:[]};e.a=n}},[55]);