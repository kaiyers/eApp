require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([2],{88:function(e,t,a){"use strict";var i=s(a(1)),n=s(a(89));function s(e){return e&&e.__esModule?e:{default:e}}Page((0,i.default)(n.default))},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(91),n=a.n(i),s=a(96),o=!1;var r=function(e){o||a(90)},u=a(0)(n.a,s.a,r,null,null);u.options.__file="E:\\app实例\\HX\\newsApp\\newsApp\\pages\\bookcontenr\\bookcontenr.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),u.options.functional&&console.error("[vue-loader] bookcontenr.vue: functional components are not supported with templates, they should use render functions."),t.default=u.exports},90:function(e,t){},91:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=r(a(4)),n=r(a(5)),s=r(a(3)),o=r(a(92));function r(e){return e&&e.__esModule?e:{default:e}}a(7);t.default={components:{uniDrawer:i.default,uniIcon:n.default,uniTag:s.default,uniNumberBox:o.default},data:function(){return{bookData:[],bookid:"",imagesList:[],chapter:"",nowCap:0,nowCapName:"",maxCap:0,laiYuanName:"",skipPage:0,prevLoading:!1,nextLoading:!1,prevdisabled:!1,nextdisabled:!1,userData:[],rightDrawerVisible:!1,navList:[],renList:[],setStyle:{},numberValue:20,numberValue1:8,pheight:0,stop:0,checked:!1,checked1:!1,bgAudioMannager:null,readList:[],bookname:"",readDuan:0,per:0,pitValue:5,spdValue:5,volValue:5}},onLoad:function(t){var a=this,i=e.getBackgroundAudioManager();i.onPlay(function(){console.log("开始播放")}),i.onPause(function(){console.log("暂停播放")}),i.onEnded(function(){a.palyEnd()}),this.bgAudioMannager=i,this.bookid=t.bid,this.nowCap=t.idx,this.checked1=!!t.isread,console.log(!!t.isread),this.navList=[{name:"正常",show:!0,class:"textarea1"},{name:"夜间",show:!1,class:"textarea2"},{name:"护眼",show:!1,class:"textarea3"},{name:"暖系",show:!1,class:"textarea4"}],this.renList=[{name:"普通女声",show:!0,id:0},{name:"普通男声",show:!1,id:1},{name:"百度逍遥",show:!1,id:3},{name:"百度丫丫",show:!1,id:4}],this.getpageHeight(),this.userData=e.getStorageSync("user"),this.getBookMeun(),this.setStyle=this.navList[0]},onShow:function(){},methods:{getpageHeight:function(){var t=this;e.getSystemInfo({success:function(e){t.pheight=e.windowHeight}})},closeRightDrawer:function(){this.rightDrawerVisible=!1},showRightDrawer:function(){this.rightDrawerVisible=!0},getBookMeun:function(){e.showLoading({title:"加载中..."});var t=this;e.request({url:"https://novel.juhe.im/book-chapters/"+t.bookid,data:{},header:{"content-type":"application/json"},method:"GET",success:function(a){e.hideLoading();new Date(a.data.updated.replace("T"," ").replace("Z","").replace(/-/g,"/").split(".")[0]);var i=a.data.chapters;t.bookData=i,t.maxCap=a.data.chapters.length-1,t.laiYuanName=a.data.name,t.getNeirong(i[t.nowCap].link),t.nowCapName=i[t.nowCap].title,e.setNavigationBarTitle({title:i[t.nowCap].title})}})},saveUserData:function(){var t=this,a=this.userData,i=this.bookid,n=this.nowCap;a.forEach(function(e){e.chapId==i&&(e.zhang=parseInt(n)+1,t.bookname=e.title)}),e.setStorageSync("user",a)},getDetails:function(e){var t=e.target.dataset.idx;this.nowCap=t,console.log(e,t),0==t?this.prevdisabled=!0:t==this.maxCap?this.nextdisabled=!0:(this.prevdisabled=!1,this.nextdisabled=!1),this.nowCapName=this.bookData[t].title,this.getNeirong(this.bookData[t].link)},changePage:function(e){var t=this.nowCap;"prev"==e.target.dataset.fanye?--t>=0?(this.nowCap=t,this.prevLoading=!0,this.nextdisabled=!1,this.nowCapName=this.bookData[t].title,this.getNeirong(this.bookData[t].link)):this.prevdisabled=!0:++t<=this.maxCap?(this.nowCap=t,this.nextLoading=!0,this.prevdisabled=!1,this.nowCapName=this.bookData[t].title,this.getNeirong(this.bookData[t].link)):this.nextdisabled=!0},getNeirong:function(t){var a=this;a.showMulu=!1,a.readDuan=0,a.chapter="",a.saveUserData(),e.setNavigationBarTitle({title:a.nowCapName}),"176小说"==a.laiYuanName?e.request({url:"https://chapter2.zhuishushenqi.com/chapter/"+encodeURIComponent(t)+"?k=2124b73d7e2e1945&t=1468223717",data:{},header:{"content-type":"application/json"},method:"GET",success:function(e){a.prevLoading=!1,a.nextLoading=!1,a.chapter=e.data.chapter.body;var t=e.data.chapter.body;if(a.readList=t.StrCut2Arr(500),console.log("我读到这里了176",a.checked1),a.checked1){console.log("我读到这里了");var i=a;setTimeout(function(){i.readBook()},500)}}}):"优质书源"==a.laiYuanName?e.request({url:"https://novel.juhe.im/chapters/"+encodeURIComponent(t),data:{},header:{"content-type":"application/json"},method:"GET",success:function(e){a.prevLoading=!1,a.nextLoading=!1,a.imagesList=e.data.chapter.images?e.data.chapter.images.split(","):"",a.chapter=e.data.chapter.cpContent?e.data.chapter.cpContent:"";var t=e.data.chapter.cpContent?e.data.chapter.cpContent:"";if(a.readList=t.StrCut2Arr(500),a.checked1){var i=a;setTimeout(function(){i.readBook()},500)}}}):e.request({url:"https://novel.juhe.im/chapters/"+encodeURIComponent(t),data:{},header:{"content-type":"application/json"},method:"GET",success:function(e){a.prevLoading=!1,a.nextLoading=!1,a.chapter=e.data.chapter.body;var t=e.data.chapter.body;if(a.readList=t.StrCut2Arr(500),a.checked1){var i=a;setTimeout(function(){i.readBook()},500)}}})},getList:function(e){var t=this;console.log(e),this.rightDrawerVisible=!1;var a=this.navList;a.forEach(function(a,i){a.show=!1,i==e&&(a.show=!0,t.setStyle=a)}),this.navList=a},getRen:function(e){var t=this;this.checked1=!1,this.bgAudioMannager.stop();var a=this.renList;a.forEach(function(a,i){a.show=!1,i==e&&(a.show=!0,t.per=a.id)}),this.renList=a},onNumberChange:function(e){this.numberValue=e},switchChange:function(t){if(this.checked=t.detail.value,t.detail.value){e.setKeepScreenOn({keepScreenOn:!0}),this.closeRightDrawer();var a=this,i=parseInt(a.pheight/2);a.timer=setInterval(function(){a.stop+=i},1e3*a.numberValue1)}else clearInterval(this.timer),e.setKeepScreenOn({keepScreenOn:!1})},onNumberChange1:function(e){this.bgAudioMannager.stop(),clearInterval(this.timer),this.checked=!1,this.numberValue1=e},onNumberChangeSpd:function(e){this.bgAudioMannager.stop(),this.checked1=!1,this.spdValue=e},onNumberChangePit:function(e){this.bgAudioMannager.stop(),this.checked1=!1,this.pitValue=e},onNumberChangeVol:function(e){this.bgAudioMannager.stop(),this.checked1=!1,this.volValue=e},lower:function(){if(this.checked){var e=this;setTimeout(function(){var t=e.nowCap;++t<=e.maxCap?(e.nowCap=t,e.nextLoading=!0,e.prevdisabled=!1,e.nowCapName=e.bookData[t].title,e.stop=0,e.getNeirong(e.bookData[t].link)):e.nextdisabled=!0},3e3)}},zMa:function(e){var t=encodeURIComponent(e);return t=encodeURIComponent(t),"http://tsn.baidu.com/text2audio?lan=zh&ctp=1&cuid=abcdxxx&tok=24.49c470166e0160c5b9f0a3b8efaf25a4.2592000.1547256837.282335-15142951&aue=3&vol="+this.volValue+"&per="+this.per+"&spd="+this.spdValue+"&pit="+this.pitValue+"&tex="+t},readBook:function(){this.bgAudioMannager.title="致爱丽丝",this.bgAudioMannager.singer="暂无",this.bgAudioMannager.src=this.zMa(this.readList[this.readDuan]),this.bgAudioMannager.play();var t={bid:this.bookid,nowCap:this.nowCap,nowCapName:this.nowCapName,bookname:this.bookname};e.setStorageSync("reading",t)},switchChange1:function(t){t.detail.value?(this.checked1=t.detail.value,this.closeRightDrawer(),e.setKeepScreenOn({keepScreenOn:!0}),this.readBook()):(this.bgAudioMannager.stop(),e.setKeepScreenOn({keepScreenOn:!1}),e.setStorageSync("reading",{}))},palyEnd:function(){if(this.bgAudioMannager.stop(),console.log("播放停止"),this.readDuan<this.readList.length-1)this.readDuan++,this.readBook();else{var e=this.nowCap;++e<=this.maxCap?(this.nowCap=e,this.nextLoading=!0,this.prevdisabled=!1,this.nowCapName=this.bookData[e].title,this.getNeirong(this.bookData[e].link)):this.nextdisabled=!0}}},onHide:function(){clearInterval(this.timer)},onNavigationBarButtonTap:function(e){this.rightDrawerVisible=!this.rightDrawerVisible}},String.prototype.StrCut2Arr=function(e){for(var t=this,a=[],i=Math.ceil(t.length/e),n=0;n<i;n++)if(t.length>=e){var s=t.substring(0,e);a.push(s),t=t.substring(e)}else t=t,a.push(t);return a}}).call(t,a(2).default)},92:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(94),n=a.n(i),s=a(95),o=!1;var r=function(e){o||a(93)},u=a(0)(n.a,s.a,r,null,null);u.options.__file="E:\\app实例\\HX\\newsApp\\newsApp\\components\\uni-number-box.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),u.options.functional&&console.error("[vue-loader] uni-number-box.vue: functional components are not supported with templates, they should use render functions."),t.default=u.exports},93:function(e,t){},94:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"uni-number-box",props:{value:{type:Number,default:0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},data:function(){return{inputValue:this.value}},computed:{disableSubtract:function(){return this.value<=this.min},disableAdd:function(){return this.value>=this.max}},watch:{value:function(e){this.inputValue=e},inputValue:function(e){this.$emit("change",e)}},methods:{_calcValue:function(e){var t=this._getDecimalScale(),a=this.inputValue*t,i=this.step*t;"subtract"===e?a-=i:"add"===e&&(a+=i),a<this.min||a>this.max||(this.inputValue=a/t)},_getDecimalScale:function(){var e=1;return~~this.step!==this.step&&(e=Math.pow(10,(this.step+"").split(".")[1].length)),e},_onBlur:function(e){var t=e.detail.value;t?((t=+t)>this.max?t=this.max:t<this.min&&(t=this.min),this.inputValue=t):this.inputValue=0}}}},95:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("view",{staticClass:"uni-numbox"},[a("view",{staticClass:"uni-numbox-minus",class:{"uni-numbox-disabled":e.disableSubtract},attrs:{eventid:"uZ3-0"},on:{click:function(t){e._calcValue("subtract")}}},[e._v("-")]),a("input",{staticClass:"uni-numbox-value",attrs:{type:"number",disabled:e.disabled,value:e.inputValue,eventid:"uku-1"},on:{blur:e._onBlur}}),a("view",{staticClass:"uni-numbox-plus",class:{"uni-numbox-disabled":e.disableAdd},attrs:{eventid:"slC-2"},on:{click:function(t){e._calcValue("add")}}},[e._v("+")])])};i._withStripped=!0;var n={render:i,staticRenderFns:[]};t.a=n},96:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("scroll-view",{class:e.setStyle.class,style:{height:e.pheight+"px"},attrs:{"scroll-y":"","scroll-top":e.stop,"scroll-with-animation":"true",eventid:"E4H-14"},on:{scrolltolower:e.lower}},[a("view",{staticClass:"icon",attrs:{eventid:"Dzo-0"},on:{tap:e.showRightDrawer}},[a("uni-icon",{attrs:{type:"bars",color:"#666666",size:"22",mpcomid:"3Tp-0"}})],1),a("view",{staticClass:"textarea0",style:{fontSize:e.numberValue+"px"}},[e._v("\n\t\t"+e._s(e.chapter)+"\n\t")]),e.imagesList.length?a("view",e._l(e.imagesList,function(e,t){return a("image",{key:t,staticStyle:{width:"700upx"},attrs:{src:e,mode:"widthFix"}})})):e._e(),a("view",{staticClass:"fanye"},[a("button",{attrs:{type:"primary",size:"mini",loading:e.prevLoading,disabled:e.prevdisabled,"data-fanye":"prev",eventid:"8W3-1"},on:{tap:e.changePage}},[e._v(" 上一章 ")]),a("button",{attrs:{type:"primary",size:"mini",loading:e.nextLoading,disabled:e.nextdisabled,"data-fanye":"next",eventid:"jtS-2"},on:{tap:e.changePage}},[e._v(" 下一章 ")])],1),a("uni-drawer",{attrs:{visible:e.rightDrawerVisible,mode:"right",eventid:"OUr-13",mpcomid:"3Ss-8"},on:{close:e.closeRightDrawer}},[a("view",{staticClass:"dwtitel"},[e._v("模式选择")]),a("view",{staticClass:"quyu"},e._l(e.navList,function(t,i,n){return a("view",{key:n,staticClass:"tag-view",attrs:{eventid:"SIs-3-"+i},on:{tap:function(t){e.getList(i)}}},[a("uni-tag",{attrs:{text:t.name,inverted:"true",type:t.show?"primary":"default",circle:!0,mpcomid:"wVj-1-"+i}})],1)})),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("字体大小")]),a("uni-number-box",{attrs:{min:16,max:32,value:e.numberValue,eventid:"k7f-4",mpcomid:"QjH-2"},on:{change:e.onNumberChange}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("自动阅读")]),a("switch",{attrs:{name:"switch",checked:e.checked,eventid:"Arq-5"},on:{change:e.switchChange}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("阅读速度")]),a("uni-number-box",{attrs:{min:5,max:15,value:e.numberValue1,eventid:"uvA-6",mpcomid:"qAk-3"},on:{change:e.onNumberChange1}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("语音播放")]),a("switch",{attrs:{name:"switch",checked:e.checked1,eventid:"fwc-7"},on:{change:e.switchChange1}})],1),a("view",[a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("语速")]),a("uni-number-box",{attrs:{min:0,max:15,value:e.spdValue,eventid:"A2Y-8",mpcomid:"ZSM-4"},on:{change:e.onNumberChangeSpd}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("音调")]),a("uni-number-box",{attrs:{min:0,max:15,value:e.pitValue,eventid:"7fY-9",mpcomid:"Y8B-5"},on:{change:e.onNumberChangePit}})],1),a("view",{staticClass:"uni-input-row dwtitel"},[a("label",[e._v("音量")]),a("uni-number-box",{attrs:{min:0,max:15,value:e.volValue,eventid:"5py-10",mpcomid:"AHv-6"},on:{change:e.onNumberChangeVol}})],1),a("view",{staticClass:"dwtitel"},[e._v("人物选择")]),a("view",{staticClass:"quyu"},e._l(e.renList,function(t,i,n){return a("view",{key:n,staticClass:"tag-view",attrs:{eventid:"p8Z-11-"+i},on:{tap:function(t){e.getRen(i)}}},[a("uni-tag",{attrs:{text:t.name,inverted:"true",type:t.show?"primary":"default",circle:!0,mpcomid:"P7s-7-"+i}})],1)})),a("view",{staticClass:"dwtitel",staticStyle:{"margin-top":"10upx"}},[a("button",{staticClass:"button",attrs:{type:"warn",size:"mini",eventid:"p22-12"},on:{tap:e.closeRightDrawer}},[e._v("关闭")])],1)])])],1)};i._withStripped=!0;var n={render:i,staticRenderFns:[]};t.a=n}},[88]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/bookcontenr/bookcontenr.js.map